"use strict";(self.webpackChunkreadmoo_member=self.webpackChunkreadmoo_member||[]).push([[159],{"./components/common/Copy/Copy.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Copy_stories});var TooltipActionType,defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/react/index.js"),FormControl=__webpack_require__("./node_modules/react-bootstrap/esm/FormControl.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),Tooltip=__webpack_require__("./node_modules/react-bootstrap/esm/Tooltip.js"),Overlay=__webpack_require__("./node_modules/react-bootstrap/esm/Overlay.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["popper","children"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}!function(TooltipActionType){TooltipActionType.SET_CONTENT="SET_CONTENT",TooltipActionType.SHOW="SHOW",TooltipActionType.HIDE="HIDE",TooltipActionType.SET_AND_SHOW="SET_AND_SHOW"}(TooltipActionType||(TooltipActionType={}));var tooltipReducer=function tooltipReducer(state,action){switch(action.type){case TooltipActionType.SET_CONTENT:return _objectSpread(_objectSpread({},state),{},{content:action.payload});case TooltipActionType.SET_AND_SHOW:return _objectSpread(_objectSpread({},state),{},{content:action.payload,show:!0});case TooltipActionType.SHOW:return _objectSpread(_objectSpread({},state),{},{show:!0});case TooltipActionType.HIDE:return _objectSpread(_objectSpread({},state),{},{show:!1});default:throw new Error("tooltip reduer 沒有此 action type")}},MyTooltip=react.forwardRef((function(_ref,ref){var popper=_ref.popper,children=_ref.children,rest=(0,objectWithoutProperties.Z)(_ref,_excluded);return(0,react.useEffect)((function(){popper&&popper.scheduleUpdate&&popper.scheduleUpdate()}),[children,popper]),(0,jsx_runtime.jsx)(Tooltip.Z,_objectSpread(_objectSpread({ref},rest),{},{children}))}));MyTooltip.displayName="MyTooltip";const hooks_useTooltip=function useTooltip(){var placement=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",target=(0,react.useRef)(null),timer=(0,react.useRef)(null),_useReducer=(0,react.useReducer)(tooltipReducer,{content:"",show:!1}),_useReducer2=(0,slicedToArray.Z)(_useReducer,2),tooltipState=_useReducer2[0],tooltipDispatch=_useReducer2[1],tooltipOverlay=(0,react.useMemo)((function(){return(0,jsx_runtime.jsx)(Overlay.Z,{target:target.current,show:tooltipState.show,placement,children:(0,jsx_runtime.jsx)(MyTooltip,{children:tooltipState.content})})}),[placement,tooltipState]),handleCopy=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(content){var delay,_args=arguments;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return delay=_args.length>1&&void 0!==_args[1]?_args[1]:700,timer.current&&(clearTimeout(timer.current),timer.current=null),_context.prev=2,_context.next=5,navigator.clipboard.writeText(content);case 5:tooltipDispatch({type:TooltipActionType.SET_AND_SHOW,payload:"已複製"}),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(2),tooltipDispatch({type:TooltipActionType.SET_AND_SHOW,payload:"再試一次"});case 11:return _context.prev=11,timer.current=setTimeout((function(){tooltipDispatch({type:TooltipActionType.HIDE})}),delay),_context.finish(11);case 14:case"end":return _context.stop()}}),_callee,null,[[2,8,11,14]])})));return function handleCopy(_x){return _ref2.apply(this,arguments)}}();return{target,tooltipState,tooltipDispatch,tooltipOverlay,handleCopy}};try{MyTooltip.displayName="MyTooltip",MyTooltip.__docgenInfo={description:"",displayName:"MyTooltip",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["hooks/useTooltip.tsx#MyTooltip"]={docgenInfo:MyTooltip.__docgenInfo,name:"MyTooltip",path:"hooks/useTooltip.tsx#MyTooltip"})}catch(__react_docgen_typescript_loader_error){}var _templateObject,_templateObject2,_templateObject3,_templateObject4,taggedTemplateLiteral=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),colors_default="fogGray300",colors_hover="fogGray700",colors_active="skyBlue500",colors_disabled="ironGray200",StyledCopyButton=styled_components_browser_esm.ZP.button(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n  color: ",";\n  background-color: transparent;\n  border: none;\n\n  &:hover {\n    color: ",";\n  }\n\n  &:active {\n    color: "," !important;\n  }\n\n  &:disabled {\n    color: ",";\n  }\n"])),(function(_ref){return _ref.theme[colors_default]}),(function(_ref2){return _ref2.theme[colors_hover]}),(function(_ref3){return _ref3.theme[colors_active]}),(function(_ref4){return _ref4.theme[colors_disabled]}));const Copy_style=styled_components_browser_esm.ZP.div(_templateObject2||(_templateObject2=(0,taggedTemplateLiteral.Z)(["\n  display: flex;\n\n  & > .form-control {\n    border: 1px dashed ",";\n    background-color: transparent;\n\n    &:hover {\n      border-color: ",";\n    }\n\n    &:active {\n      border-color: "," !important;\n    }\n\n    &:disabled {\n      border-color: ",";\n      color: ",";\n    }\n  }\n\n  ","\n"])),(function(_ref5){return _ref5.theme[colors_default]}),(function(_ref6){return _ref6.theme[colors_hover]}),(function(_ref7){return _ref7.theme[colors_active]}),(function(_ref8){return _ref8.theme[colors_disabled]}),(function(_ref9){return _ref9.theme[colors_disabled]}),(function(_ref10){var $size=_ref10.$size;return"sm"===$size?(0,styled_components_browser_esm.iv)(_templateObject3||(_templateObject3=(0,taggedTemplateLiteral.Z)(["\n        & > .form-control {\n          font-size: 0.875rem;\n          line-height: 1.8;\n          padding: 0.125rem 0.5rem;\n        }\n\n        & > "," {\n          font-size: 0.875rem;\n          padding: 0.25rem;\n        }\n      "])),StyledCopyButton):"lg"===$size?(0,styled_components_browser_esm.iv)(_templateObject4||(_templateObject4=(0,taggedTemplateLiteral.Z)(["\n        & > .form-control {\n          font-size: 1rem;\n          line-height: 1.25;\n          padding: 1rem;\n        }\n\n        & > "," {\n          font-size: 1.25rem;\n          padding: 1rem;\n        }\n      "])),StyledCopyButton):void 0}));var Copy=function Copy(_ref){var value=_ref.value,_ref$size=_ref.size,size=void 0===_ref$size?"sm":_ref$size,_useTooltip=hooks_useTooltip(),formControlTooltipTarget=_useTooltip.target,formControlTooltipDispatch=_useTooltip.tooltipDispatch,formControlTooltipOverlay=_useTooltip.tooltipOverlay,handleFormControlCopy=_useTooltip.handleCopy,_useTooltip2=hooks_useTooltip(),buttonTooltipTarget=_useTooltip2.target,buttonTooltipDispatch=_useTooltip2.tooltipDispatch,buttonTooltipOverlay=_useTooltip2.tooltipOverlay,handleButtonCopy=_useTooltip2.handleCopy;return(0,jsx_runtime.jsxs)(Copy_style,{$size:size,children:[(0,jsx_runtime.jsx)(FormControl.Z,{value,readOnly:!0,ref:formControlTooltipTarget,onMouseOver:function onMouseOver(){return formControlTooltipDispatch({type:TooltipActionType.SET_AND_SHOW,payload:"複製"})},onMouseOut:function onMouseOut(){return formControlTooltipDispatch({type:TooltipActionType.HIDE})},onClick:function onClick(){return handleFormControlCopy(value)}}),formControlTooltipOverlay,(0,jsx_runtime.jsx)(StyledCopyButton,{ref:buttonTooltipTarget,onMouseOver:function onMouseOver(){return buttonTooltipDispatch({type:TooltipActionType.SET_AND_SHOW,payload:"複製連結"})},onMouseOut:function onMouseOut(){return buttonTooltipDispatch({type:TooltipActionType.HIDE})},onClick:function onClick(){return handleButtonCopy(value)},children:(0,jsx_runtime.jsx)("i",{className:"mo mo-filetexts"})}),buttonTooltipOverlay]})};Copy.displayName="Copy";const Copy_Copy=Copy;try{Copy.displayName="Copy",Copy.__docgenInfo={description:"",displayName:"Copy",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},size:{defaultValue:{value:"sm"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"lg"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/common/Copy/Copy.tsx#Copy"]={docgenInfo:Copy.__docgenInfo,name:"Copy",path:"components/common/Copy/Copy.tsx#Copy"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,_Default$parameters2$;function Copy_stories_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Copy_stories_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Copy_stories_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Copy_stories_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const Copy_stories={title:"Copy",component:Copy_Copy};var Default={args:{value:"3333-55555"}};Default.parameters=Copy_stories_objectSpread(Copy_stories_objectSpread({},Default.parameters),{},{docs:Copy_stories_objectSpread(Copy_stories_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:Copy_stories_objectSpread({originalSource:"{\n  args: {\n    value: '3333-55555'\n  }\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]}}]);